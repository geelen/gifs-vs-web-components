<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>A GIF Odyssey</title><link rel="stylesheet" type="text/css" href="styles/styles.css"><script>if ('registerElement' in document
  && 'createShadowRoot' in HTMLElement.prototype
  && 'import' in document.createElement('link')
  && 'content' in document.createElement('template')) {
  // We're using a browser with native WC support!
} else {
  document.write('<script src="x-gif/dist/platform.js"><\/script>')
}
</script></head><body><article><section><div ui-fx="blur2" class="fullscreen"><x-gif src="images/stars.gif" fill speed="0.6" stopped></x-gif></div><div class="content"><h1><small>GIFs</small></h1><div class="mid">vs</div><h1><small>Web Components</small></h1><div class="mid">by</div><div class="line"><div class="me"></div><h4>@GlenMaddern</h4></div></div></section><section><div ui-fx="blur2" class="fullscreen"><x-gif src="images/stars.gif" fill speed="0.6" stopped></x-gif></div><div class="content"><div class="mid">A story in four parts</div></div></section><section class="content"><h3>Chapter One</h3><h1>The Idea</h1></section><section class="content"><h1>VastImg</h1></section><section data-bespoke-state="gif-skull-2" class="content"></section><section class="content"><h1>VastImg</h1></section><section><div ui-fx="blur2" class="fullscreen"><x-gif src="images/shocked.gif" fill n-times="1" stopped></x-gif></div><div class="content wait-for-gif"><div></div><h1>ETOOMUCHPORN</h1></div></section><section data-bespoke-state="black" class="content"><h1>GifCity</h1><div class="mid">+</div><h1>Tumblr</h1><div class="mid">=</div><h1><img src="images/heart.gif" class="smallish"></h1></section><section class="content"><h4><strong>benschwarz.github.io/gifcity/?t=tumblrs,go,here</strong></h4></section><section><div class="content"><h2>mrdiv</h2></div><iframe data-bespoke-delay-src="http://benschwarz.github.io/gifcity/?t=mrdiv"></iframe></section><section><div class="content"><h2>simpsonsgifs</h2></div><iframe data-bespoke-delay-src="http://benschwarz.github.io/gifcity/?t=simpsonsgifs"></iframe></section><section><div class="content"><h2>skt-na-veia-sempre</h2></div><iframe data-bespoke-delay-src="http://benschwarz.github.io/gifcity/?t=skt-na-veia-sempre"></iframe></section><section class="content"><h1 class="green">✔</h1></section><section><div ui-fx="blur1" class="fullscreen"><x-gif src="images/takes_off_glasses.gif" fill n-times="1" stopped></x-gif></div></section><section data-bespoke-state="light" class="content"><img src="images/djgif_logo.gif"><h1>DJGif</h1><h4>github.com/geelen/djgif</h4><h4>djgif.com<span class="feat"> (soon)</span></h4></section><section class="content nobuild"><div class="mid">Two challenges:</div><ul><li>• Change speed of GIFs</li><li class="fadeout">• Find beats from music</li></ul><hr></section><section class="content"><pre><code class="language-markup">&lt;img src="probably_cats.gif"&gt;</code></pre><pre><code class="language-javascript">var img = new Image;
img.src = "definitely_cats.gif";</code></pre><h3>Now what?</h3></section><section class="content"><h1 class="red">✖</h1></section><section class="content"><div class="mid">What is</div><h3><strong>an animation</strong></h3><div class="mid">but a</div><h3><strong>series of<span class="feat"> frames</span></strong></h3><div class="mid">?</div></section><section class="content"><h1>What's in a GIF?</h1><h5><strong><a target="_blank" href="http://www.matthewflickinger.com/lab/whatsinagif/bits_and_bytes.asp">http://www.matthewflickinger.com/lab/ whatsinagif/bits_and_bytes.asp</a></strong></h5></section><section class="content"><img src="images/gif_file_stream.gif"></section><section class="content"><h3><strong>header</strong></h3><h3><strong><span class="feat">frame</span><span class="green"> frame</span><span class="red"> frame</span></strong></h3><h3><strong>footer</strong></h3></section><section class="content"><h3><strong>header<span class="feat"> frame</span> footer</strong></h3><h3><strong>header<span class="green"> frame</span> footer</strong></h3><h3><strong>header<span class="red"> frame</span> footer</strong></h3></section><seciton class="content"><h1><a target="_blank" href="https://github.com/geelen/x-gif/blob/gh-pages/src/exploder.js">exploder.js</a></h1></seciton><section class="content"><h4>Put the frames in the DOM</h4><pre><code class="language-markup">&lt;div data-frame="0"&gt;
  &lt;img src="frame0.gif"&gt;
  &lt;img src="frame1.gif"&gt;
  &lt;img src="frame2.gif"&gt;
&lt;/div&gt;
</code></pre></section><section class="content"><h4>Show one at a time with CSS</h4><pre><code class="language-css">[data-frame] img {
  opacity: 0;
  position: absolute;
}
[data-frame="0"] img:nth-child(1),
[data-frame="1"] img:nth-child(2),
[data-frame="2"] img:nth-child(3) {
  opacity: 1;
}
</code></pre></section><section class="content"><h4>Cycle through with JS</h4><pre><code class="language-javascript">var animate = function() {
  var currentFrame = calculateFrame();
  framesElement.dataset.frame = currentFrame;
  requestAnimationFrame(animate);
}
animate();
</code></pre></section><section data-bespoke-state="light" class="content"><h3>Chapter Two</h3><h1>The Component</h1></section><section data-bespoke-state="light" class="content"><img src="images/p-logo.svg"><h1>&lt;x-gif&gt;</h1><h4>geelen.github.io/x-gif</h4></section><section data-bespoke-state="light" class="content"><h1>Dreamcode</h1></section><section data-bespoke-state="light" class="content"><pre><code class="language-markup">&lt;img src='lulz.gif'&gt;</code></pre><pre><code class="language-markup">&lt;x-gif src='lulz.gif'&gt;&lt;/x-gif&gt;</code></pre></section><section data-bespoke-state="light" class="content"><pre><code class="language-javascript">&lt;x-gif
  src=''
  // Playback Modes
  [speed='' || sync || bpm='']
  // Playback options
  stopped
  fill
  n-times=''
  ping-pong
  snap
&gt;</code></pre></section><section data-bespoke-state="light" class="content"><h4><a target="_blank" href="http://localhost:1983/">geelen.github.io/x-gif</a></h4></section><!--section.content(data-bespoke-state='light')--><!--  h6 &lt;img src="images/jump.gif"&gt;--><!--  img.two-up(data-bespoke-delay-src="images/jump.gif")--><!--  x-gif.two-up(src="images/jump.gif" stopped)--><!--  h6 &lt;--><!--    span.feat x-gif--><!--    |  src="images/jump.gif"&gt;--><!----><!--section.content(data-bespoke-state='light')--><!--  h6 &lt;x-gif src="images/jump.gif"&gt;--><!--  x-gif.two-up(src="images/jump.gif" speed="1" stopped)--><!--  x-gif.two-up(src="images/jump.gif" speed="2" stopped)--><!--  h6 &lt;x-gif src="images/jump.gif"--><!--    span.feat  speed="2"--><!--    | &gt;--><!----><!--section.content(data-bespoke-state='light')--><!--  h6 &lt;img src="images/waves.gif"&gt;--><!--  img.two-up(src="images/waves.gif")--><!--  img.two-up(src="images/vectors.gif")--><!--  h6 &lt;img src="images/vectors.gif"&gt;--><!----><!--section.content.nobuild(data-bespoke-state='light')--><!--  h6 &lt;x-gif src="images/waves.gif"--><!--    span.feat  bpm="140"--><!--    | &gt;--><!--  x-gif.two-up(src="images/waves.gif" bpm="140" stopped)--><!--  x-gif.two-up(src="images/vectors.gif" bpm="140" stopped)--><!--  h6 &lt;x-gif src="images/vectors.gif--><!--    span.feat  bpm="140"--><!--    | &gt;--><!----><!--section.content.nobuild(data-bespoke-state='light' )--><!--  h6 &lt;x-gif src="images/waves.gif"--><!--    span.feat  hard-bpm="140"--><!--    | &gt;--><!--  x-gif.two-up(src="images/waves.gif" hard-bpm="140" stopped)--><!--  x-gif.two-up(src="images/vectors.gif" hard-bpm="140" stopped)--><!--  h6 &lt;x-gif src="images/vectors.gif--><!--    span.feat  hard-bpm="140"--><!--    | &gt;--><!----><!--section.content.nobuild(data-bespoke-state='light')--><!--  h6 &lt;x-gif src="images/jump.gif"--><!--  x-gif.two-up(src="images/jump.gif" stopped)--><!--  x-gif.two-up(src="images/jump.gif" ping-pong stopped)--><!--  h6 &lt;x-gif src="images/jump.gif--><!--    span.feat  ping-pong--><!--    | &gt;--><!----><!--section.content.nobuild(data-bespoke-state='light')--><!--  h6 &lt;x-gif src="images/jump.gif"--><!--    span.feat  n-times="1"--><!--    | &gt;--><!--  x-gif.two-up(src="images/jump.gif" n-times="1" stopped)--><!--  x-gif.two-up(src="images/jump.gif" n-times="2" stopped)--><!--  h6 &lt;x-gif src="images/jump.gif--><!--    span.feat  n-times="2"--><!--    | &gt;--><!----><!--section--><!--  .fullscreen--><!--    x-gif(src="images/jump.gif" fill stopped)--><!--  .content.nobuild(data-bespoke-state='light')--><!--    h6 &lt;x-gif src="images/jump.gif"--><!--      span.feat  fill--><!--      | &gt;--><!----><!--section.content(data-bespoke-state='light')--><!--  img(src="images/p-logo.svg")--><!--  h4 geelen.github.io/x-gif--><!--  h4.feat The GIF tag the internet deserves--><section class="content"><h3>Chapter Three</h3><h1>The Launch</h1></section><section class="content"><img src="images/x-gif_traffic.png"></section><section class="content"><h6>Polymer</h6><pre><code>platform.js - 50kb
polymer.html - 1kb
polymer.js - 23kb
layout.html - 2kb</code></pre><h6><br>&lt;x-gif&gt;</h6><pre><code>x-gif.html - 1kb
x-gif.js - 11kb
x-gif.css - 3kb</code></pre><h6><br>7 requests, 91kb total</h6></section><section data-bespoke-state="black" class="content"><h4>https://github.com/Polymer/vulcanize</h4></section><section data-bespoke-state="vulcan" class="content nobuild"><h4>https://github.com/Polymer/vulcanize</h4></section><section class="content"><pre><code class="language-bash">vulcanize -o dist/x-gif.vulcan.html --inline dist/x-gif.html</code></pre><pre><code>platform.js - 50kb
x-gif.vulcan.html - 34kb</code></pre><h6><br>7 requests, 91kb total</h6></section><section class="content"><h4>Polymer</h4><ul><li>• Very much a framework</li><li>• Own mental model for structuring apps</li><li>• Easy to follow, but seemed orthogonal to my purpose</li></ul></section><section class="content"><h4>What about Angular/Ember/React</h4><ul><li>• Custom elements without Web Components</li><li>• Provide common functionality (Promises, XHR)</li><li>• Why not use them?</li></ul></section><section class="content"><h4>An idea!</h4><ul><li>• A framework-agnostic core, with adapters for each framework</li><li>• Consistent component API</li><li>• Bare minimum of dependencies for each framework</li><li>• One library, 4 entry points</li></ul></section><section class="content"><h4>Superficially, it should work</h4><pre><code class="language-javascript">import XGifCore from './x-gif.core.js'
myModule.directive('xGif', XGifCore.Angular);
Ember.component('xGif', XGifCore.Ember);
React.createClass(XGifCore.React);
Polymer(XGifCore.Polymer);
</code></pre></section><section class="content"><h1 class="red">✖</h1></section><section class="content"><h4>Problems</h4><ul><li>• Frameworks aren't really compatible with one another</li><li>• All have different expectations/idioms for accomplishing things</li></ul></section><!--section.content--><!--  h4 An example - Playback--><!--  pre--><!--    code.language-javascript--><!--      = "setFrame(fraction, repeatCount) {\n  var frameNr = // SOME MATHS;\n  this.element.dataset['frame'] = frameNr;\n}"--><!--  pre--><!--    code.language-javascript--><!--      = "setFrame(fraction, repeatCount) {\n  var frameNr = // SAME MATHS;\n  this.domUpdater.setFrame(frameNr);\n}"--><!----><!--section.content--><!--  pre--><!--    code.language-javascript--><!--      = "class DirectDomUpdater {\n  setFrame(frameNr) {\n    this.element.dataset['frame'] = frameNr;\n  }\n}"--><!--  pre--><!--    code.language-javascript--><!--      = "// Meets the api for the DomUpdater that Playback expects\n// but React works totally differently.\nclass GifState {\n  setFrame(frameNr) { this.frameNr = frameNr; }\n}"--><section class="content"><h4>An example - Playback</h4><pre><code class="language-javascript">setFrame(fraction, repeatCount) {
  var frameNr = (this.pingPong &amp;&amp; repeatCount % 2 &gt;= 1) ?
    this.gif.frameAt(1 - fraction) :
    this.gif.frameAt(fraction);
  this.element.dataset['frame'] = frameNr;
}</code></pre></section><section class="content"><h4>React changes</h4><pre><code class="language-javascript">setFrame(fraction, repeatCount) {
  var frameNr = // SAME MATHS;
  this.domUpdater.setFrame(frameNr);
}</code></pre><pre><code class="language-javascript">class ShadowDomUpdater { /* ... */ }
class ReactStateUpdater {/* ... */ }
</code></pre></section><section class="content"><img src="images/loljava.png"></section><section><div class="fullscreen"><x-gif src="images/nope.gif" fill stopped></x-gif></div></section><section class="content"><h1>Shadow DOM</h1><div class="mid">is</div><h1>badass</h1></section><section class="content"><h1>:(</h1></section><section data-bespoke-state="light" class="content"><h3>Chapter Four</h3><h1>The Solution</h1></section><section data-bespoke-state="chrome" class="content"><h1>Chrome 36</h1></section><section data-bespoke-state="light" class="content"><img src="images/addy_chrome_36.png"></section><section data-bespoke-state="light" class="content"><h4>Polymer</h4><div class="mid">is not equal to</div><h4>Web Components</h4></section><section data-bespoke-state="light" class="content"><h6>Polymer</h6><pre><code class="language-javascript">class XGif {
 ready() { /* ... */ }
}
Polymer('x-gif', new XGif());</code></pre><h6>Web Components</h6><pre><code class="language-javascript">class XGif extends HTMLElement {
  createdCallback() { /* ... */ }
}
document.registerElement('x-gif', XGif);</code></pre></section><section data-bespoke-state="light" class="content"><h6>Polymer</h6><pre class="small"><code class="language-javascript">srcChanged() {
  this.playback = new Playback(/* ... */)
}
speedChanged(oldVal, newVal) {
  this.playback.speed = newVal;
}</code></pre><h6>Web Components</h6><pre class="small"><code class="language-javascript">attributeChangedCallback(attribute, oldVal, newVal) {
  if (attribute == 'src') {
    this.controller.srcChanged(newVal);
  } else if (attribute == 'speed') {
    this.controller.speedChanged(parseFloat(newVal));
  // ...</code></pre></section><section><div ui-fx="blur1" class="fullscreen"><x-gif src="images/carl_sagan_good.gif" fill n-times="1" stopped></x-gif></div><div class="content wait-for-gif"><h1>Dumb ideas</h1><div class="mid">are</div><h1>awesome</h1></div></section><section data-bespoke-state="light" class="content"><h1>Thanks!</h1><div class="line"><div class="me"></div><h3><strong>@GlenMaddern</strong></h3></div><h4><strong>geelen.github.io/a-gif-odyssey</strong></h4></section><section data-bespoke-state="light" class="content"><img src="images/djgif_logo.gif"><h1><a target="_blank" href="http://djgif.com/?rdio=p7794600&amp;tumblrs=mrdiv">DEMO</a></h1></section></article><script src="scripts/scripts.js"></script><link rel="import" href="x-gif/dist/x-gif.raw.html"></body></html>